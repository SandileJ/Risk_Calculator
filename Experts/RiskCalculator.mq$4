//+------------------------------------------------------------------+
//|                                                      RiskCalc.mq4|
//|                        Copyright 2023, MetaQuotes Software Corp. |
//|                                       https://www.mql5.com       |
//+------------------------------------------------------------------+
#property strict

// Input parameters
input double RiskAmount = 5;      // Risk amount per trade in dollars
input double StopLoss = 50;       // Stop loss in pips
input double TakeProfit = 100;    // Take profit in pips
input double PipValue = 10;       // Pip value in dollars per lot

double LotSize;
double PotentialProfit;

//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
int OnInit()
  {
   CalculateRisk();

   return(INIT_SUCCEEDED);
  }
//+------------------------------------------------------------------+
//| Expert deinitialization function                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   // Cleanup code if needed
   Comment(""); // Clear the comment on deinitialization
  }
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
   // Update the display on each tick
   Comment("Risk Amount: $", RiskAmount, "\nStop Loss: ", StopLoss, " pips\nTake Profit: ", TakeProfit, " pips\nPip Value: $", PipValue, "\n\nCalculated Lot Size: ", LotSize, "\nPotential Profit: $", PotentialProfit);
  }
//+------------------------------------------------------------------+
//| Function to calculate risk                                       |
//+------------------------------------------------------------------+
void CalculateRisk()
  {
   // Calculate the lot size
   LotSize = RiskAmount / (StopLoss * PipValue / 10.0);

   // Calculate the potential profit
   PotentialProfit = LotSize * TakeProfit * PipValue / 10.0;

   // Output the calculated lot size and potential profit
   Print("Calculated Lot Size: ", LotSize);
   Print("Potential Profit: ", PotentialProfit);

   // Display the results on the chart
   Comment("Risk Amount: $", RiskAmount, "\nStop Loss: ", StopLoss, " pips\nTake Profit: ", TakeProfit, " pips\nPip Value: $", PipValue, "\n\nCalculated Lot Size: ", LotSize, "\nPotential Profit: $", PotentialProfit);
  }
//+------------------------------------------------------------------+